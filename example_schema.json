{
    "title": "Complex Form Test",
    "description": "Tests lazy loading of widgets",
    "type": "object",
    "properties": {
        "personalInfo": {
            "type": "object",
            "title": "Personal Information",
            "properties": {
                "name": {
                    "type": "string",
                    "title": "Full Name"
                },
                "age": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 120
                },
                "contact": {
                    "type": "object",
                    "properties": {
                        "email": {
                            "type": "string",
                            "format": "email"
                        },
                        "phone": {
                            "type": "string",
                            "pattern": "^\\+?[1-9]\\d{1,14}$"
                        }
                    }
                }
            }
        },
        "preferences": {
            "type": "object",
            "title": "User Preferences",
            "if": {
                "properties": {
                    "enableNotifications": {
                        "const": true
                    }
                }
            },
            "then": {
                "properties": {
                    "enableNotifications": {
                        "type": "boolean",
                        "title": "Enable Notifications"
                    },
                    "notificationTypes": {
                        "type": "array",
                        "title": "Notification Types",
                        "items": {
                            "enum": ["email", "sms", "push"]
                        },
                        "minItems": 1
                    },
                    "frequency": {
                        "type": "string",
                        "enum": ["realtime", "daily", "weekly"]
                    }
                }
            },
            "else": {
                "properties": {
                    "enableNotifications": {
                        "type": "boolean",
                        "title": "Enable Notifications"
                    }
                }
            }
        },
        "dataSource": {
            "title": "Data Source Configuration",
            "oneOf": [
                {
                    "title": "Database",
                    "type": "object",
                    "properties": {
                        "type": { "const": "database" },
                        "host": { "type": "string" },
                        "port": { "type": "integer" },
                        "credentials": {
                            "type": "object",
                            "properties": {
                                "username": { "type": "string" },
                                "password": { "type": "string" }
                            }
                        }
                    }
                },
                {
                    "title": "API",
                    "type": "object",
                    "properties": {
                        "type": { "const": "api" },
                        "url": { "type": "string", "format": "uri" },
                        "apiKey": { "type": "string" }
                    }
                }
            ]
        },
        "tags": {
            "type": "array",
            "title": "Tags",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string" },
                    "color": { 
                        "type": "string",
                        "enum": ["red", "green", "blue", "yellow"]
                    }
                }
            }
        }
    }
}