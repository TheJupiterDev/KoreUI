{
    "type": "object",
    "title": "Enchantment",
    "properties": {
        "description": {
            "type": "string",
            "title": "Description",
            "description": "Text component describing the enchantment"
        },
        "exclusive_set": {
            "type": "array",
            "title": "Exclusive Set",
            "description": "List of enchantments that cannot be combined with this one",
            "items": {
                "type": "string",
                "enumSource": "enchantments"
            }
        },
        "supported_items": {
            "type": "array",
            "title": "Supported Items",
            "description": "Items that can receive this enchantment",
            "items": {
                "type": "string",
                "enumSource": "items"
            }
        },
        "primary_items": {
            "type": "array",
            "title": "Primary Items",
            "description": "Items for which this is a primary enchantment",
            "items": {
                "type": "string",
                "enumSource": "items"
            }
        },
        "weight": {
            "type": "integer",
            "title": "Weight",
            "description": "Probability weight for random enchanting",
            "minimum": 1,
            "maximum": 1024,
            "default": 1
        },
        "max_level": {
            "type": "integer",
            "title": "Max Level",
            "description": "Maximum enchantment level",
            "minimum": 1,
            "maximum": 255,
            "default": 1
        },
        "min_cost": {
            "type": "object",
            "title": "Minimum Cost",
            "description": "Minimum experience cost for enchanting",
            "properties": {
                "base": {
                    "type": "integer",
                    "title": "Base Cost",
                    "minimum": 0,
                    "maximum": 20000,
                    "default": 1
                },
                "per_level_above_first": {
                    "type": "integer",
                    "title": "Per Level Above First",
                    "minimum": 0,
                    "maximum": 20000,
                    "default": 1
                }
            },
            "required": ["base", "per_level_above_first"]
        },
        "max_cost": {
            "type": "object",
            "title": "Maximum Cost",
            "description": "Maximum experience cost for enchanting",
            "properties": {
                "base": {
                    "type": "integer",
                    "title": "Base Cost",
                    "minimum": 0,
                    "maximum": 20000,
                    "default": 1
                },
                "per_level_above_first": {
                    "type": "integer",
                    "title": "Per Level Above First",
                    "minimum": 0,
                    "maximum": 20000,
                    "default": 1
                }
            },
            "required": ["base", "per_level_above_first"]
        },
        "anvil_cost": {
            "type": "integer",
            "title": "Anvil Cost",
            "description": "Experience cost multiplier for anvil operations",
            "minimum": 0,
            "maximum": 20000,
            "default": 1
        },
        "slots": {
            "type": "array",
            "title": "Equipment Slots",
            "description": "Valid equipment slots for this enchantment",
            "items": {
                "type": "string",
                "enum": [
                    "any",
                    "hand",
                    "mainhand", 
                    "offhand",
                    "armor",
                    "feet",
                    "legs", 
                    "chest",
                    "head",
                    "body"
                ]
            }
        },
        "effects": {
            "type": "object",
            "title": "Effects",
            "description": "Map of effect components by type",
            "default": {
                " ": {
                    "type": "minecraft:damage_protection",
                    "damage_type": "minecraft:fall",
                    "amount": {
                    "base": 1,
                    "per_level": 0.25
                    }
                }
            },
            "properties": {
                "^.*$": {
                    "oneOf": [
                        {
                            "type": "object",
                            "title": "Damage Protection",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:damage_protection"
                                },
                                "damage_type": {
                                    "type": "string",
                                    "title": "Damage Type",
                                    "enumSource": "damage_types"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "damage_type", "amount"]
                        },
                        {
                            "type": "object", 
                            "title": "Damage Immunity",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:damage_immunity"
                                },
                                "damage_type": {
                                    "type": "string",
                                    "title": "Damage Type",
                                    "enumSource": "damage_types"
                                }
                            },
                            "required": ["type", "damage_type"]
                        },
                        {
                            "type": "object",
                            "title": "Attribute",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:attribute"
                                },
                                "attribute": {
                                    "type": "string",
                                    "title": "Attribute",
                                    "enumSource": "attributes"
                                },
                                "operation": {
                                    "type": "string",
                                    "title": "Operation",
                                    "enum": ["add_value", "add_multiplied_base", "add_multiplied_total"]
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                },
                                "id": {
                                    "type": "string",
                                    "title": "ID",
                                    "description": "Unique identifier for this attribute modifier"
                                }
                            },
                            "required": ["type", "attribute", "operation", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "All Damage Multiplication",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:all_damage_multiplication"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Ammo Use",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:ammo_use"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Armor Effectiveness",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:armor_effectiveness"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Block Experience",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:block_experience"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Crossbow Charge Time",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:crossbow_charge_time"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Equipment Drops",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:equipment_drops"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Fishing Luck",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:fishing_luck"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Fishing Time Reduction",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:fishing_time_reduction"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Item Damage",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:item_damage"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Knockback",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:knockback"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Location Changed",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:location_changed"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Mob Experience",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:mob_experience"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Post Attack",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:post_attack"
                                },
                                "effect": {
                                    "type": "string",
                                    "title": "Effect",
                                    "enumSource": "effects"
                                },
                                "level": {
                                    "$ref": "#/definitions/levelBasedValue"
                                },
                                "duration": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "effect", "level", "duration"]
                        },
                        {
                            "type": "object",
                            "title": "Projectile Count",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:projectile_count"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Projectile Piercing",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:projectile_piercing"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Projectile Spread",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:projectile_spread"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Repair With XP",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:repair_with_xp"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Trident Return Acceleration",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:trident_return_acceleration"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        },
                        {
                            "type": "object",
                            "title": "Trident Spin Attack Damage",
                            "properties": {
                                "type": {
                                    "type": "string",
                                    "const": "minecraft:trident_spin_attack_damage"
                                },
                                "amount": {
                                    "$ref": "#/definitions/levelBasedValue"
                                }
                            },
                            "required": ["type", "amount"]
                        }
                    ]
                }
            }
        }
    },
    "definitions": {
        "levelBasedValue": {
            "title": "Level Based Value",
            "description": "A value that can be constant or vary based on enchantment level",
            "oneOf": [
                {
                    "type": "number",
                    "title": "Constant Value"
                },
                {
                    "type": "object",
                    "title": "Linear Scaling",
                    "properties": {
                        "type": {
                            "type": "string",
                            "const": "minecraft:linear"
                        },
                        "base": {
                            "type": "number",
                            "title": "Base Value"
                        },
                        "per_level_above_first": {
                            "type": "number", 
                            "title": "Per Level Above First"
                        }
                    },
                    "required": ["type", "base", "per_level_above_first"]
                },
                {
                    "type": "object",
                    "title": "Clamped Value",
                    "properties": {
                        "type": {
                            "type": "string",
                            "const": "minecraft:clamped"
                        },
                        "value": {
                            "$ref": "#/definitions/levelBasedValue"
                        },
                        "min": {
                            "type": "number",
                            "title": "Minimum Value"
                        },
                        "max": {
                            "type": "number",
                            "title": "Maximum Value"
                        }
                    },
                    "required": ["type", "value", "min", "max"]
                },
                {
                    "type": "object",
                    "title": "Fraction Value",
                    "properties": {
                        "type": {
                            "type": "string",
                            "const": "minecraft:fraction"
                        },
                        "numerator": {
                            "$ref": "#/definitions/levelBasedValue"
                        },
                        "denominator": {
                            "$ref": "#/definitions/levelBasedValue"
                        }
                    },
                    "required": ["type", "numerator", "denominator"]
                },
                {
                    "type": "object",
                    "title": "Levels Squared",
                    "properties": {
                        "type": {
                            "type": "string",
                            "const": "minecraft:levels_squared"
                        },
                        "added": {
                            "type": "number",
                            "title": "Added Value",
                            "default": 0
                        }
                    },
                    "required": ["type"]
                },
                {
                    "type": "object",
                    "title": "Lookup Table",
                    "properties": {
                        "type": {
                            "type": "string",
                            "const": "minecraft:lookup"
                        },
                        "values": {
                            "type": "array",
                            "title": "Values by Level",
                            "items": {
                                "type": "number"
                            }
                        },
                        "fallback": {
                            "$ref": "#/definitions/levelBasedValue"
                        }
                    },
                    "required": ["type", "values"]
                }
            ]
        }
    }
}